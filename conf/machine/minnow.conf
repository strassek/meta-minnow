#@TYPE: Machine
#@NAME: minnow

#@WEBTITLE: Intel Atom E640T Processor with Intel EG20T Controller Hub Development Kit (Queens Bay) with Proprietary IEMGD Accelerated Graphics.

#@DESCRIPTION: Machine configuration for the Minnow Board systems

require conf/machine/include/tune-atom.inc
require conf/machine/include/ia32-base.inc
require conf/machine/include/meta-intel.inc

# Some of the EMGD components have dependency on libx11.
# Add these only when Xserver is enabled with the EMGD driver
# Otherwise unwanted X components will start showing up in the non-X images
VA_FEATURES ?= "gst-va-intel va-intel"

MACHINE_FEATURES += "efi va-impl-mixvideo"
MACHINE_EXTRA_RRECOMMENDS += "${VA_FEATURES}"

PREFERRED_PROVIDER_virtual/kernel ?= "linux-yocto"
PREFERRED_VERSION_linux-yocto = "3.4%"

XSERVER ?= "${XSERVER_IA32_BASE} \
            ${XSERVER_IA32_EXT} \
            ${XSERVER_IA32_EMGD} \
           "

PREFERRED_VERSION_xserver-xorg ?= "1.9.3"
PREFERRED_VERSION_mesa-dri ?= "8.0.4"
PREFERRED_VERSION_xf86-input-evdev ?= "2.6.0"
PREFERRED_VERSION_emgd-driver-bin ?= "1.14"

# Add temporary support for the SYS945x DB9 serial console
#SERIAL_CONSOLE = "115200 ttyPCH1"
#APPEND += "console=ttyPCH1,115200 console=tty0 vmalloc=256MB"
APPEND += "console=ttyS0,115200 console=tty0 vmalloc=256MB"
SERIAL_CONSOLE = "115200 ttyS0"

MACHINE_EXTRA_RRECOMMENDS += "${VA_FEATURES}"
